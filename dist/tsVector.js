"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function C(t,e){return t+e}function E(t,e){return t-e}function f(t){return Array(t).fill(0)}function p(t,e){let n=f(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]+e[r];return n}function S(t,e){let n=f(t.length);for(let r=0;r<t.length;r++)n[r]=Math.min(t[r],e[r]);return n}function Z(t,e){let n=f(t.length);for(let r=0;r<t.length;r++)n[r]=Math.max(t[r],e[r]);return n}function M(t,e){let n=f(e.length);for(let r=0;r<e.length;r++)n[r]=t*e[r];return n}function v(t,e){return p(t,M(-1,e))}function x(t,e){let n=f(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]*e[r];return n}function L(t,e){let n=f(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]/e[r];return n}function P(t,e){return t.reduce((n,r,l)=>n+r*e[l],0)}function d(t){return Math.sqrt(t.reduce((e,n)=>e+n*n,0))}function R(t){return M(1/d(t),t)}function y(t,e=1e-6){return d(t)<e}function T(t,e,n=1e-6){return y(v(t,e),n)}function D(t,e){const[n,r,l]=t,[o,s,i]=e;return[r*i-l*s,l*o-n*i,n*s-r*o]}function a(t,e){return Array(t).fill(0).map(()=>f(e))}function N(t,e=[0,0,0]){t===null&&(t=g(3));let n=a(4,4);for(let r=0;r<3;r++){for(let l=0;l<3;l++)n[r][l]=t[r][l];n[r][3]=e[r]}return n[3][3]=1,n}function c(t,e=!1){let n=t.length,r=t[0].length;if(e){for(let l=1;l<n;l++)if(t[l].length!==r)throw new Error(`Row ${l} has ${t[l].length} columns, expected ${r}`)}return[t.length,t[0].length]}function q(t){const[e,n]=c(t);let r=a(n,e);for(let l=0;l<e;l++)for(let o=0;o<n;o++)r[o][l]=t[l][o];return r}function g(t){let e=a(t,t);for(let n=0;n<t;n++)e[n][n]=1;return e}function A(t,e){let n=f(t.length);for(let r=0;r<t.length;r++)for(let l=0;l<t[r].length;l++)n[r]+=t[r][l]*e[l];return n}function z(t,e){const[n,r]=c(t),[l,o]=c(e);if(r!==l)throw new Error(`Matrix A has ${r} columns, Matrix B has ${l} rows. Cannot multiply.`);let s=a(n,o);for(let i=0;i<n;i++)for(let u=0;u<o;u++)for(let h=0;h<r;h++)s[i][u]+=t[i][h]*e[h][u];return s}function w(t){return t.map(e=>e.slice())}function B(t,e=.001){return t.map(n=>n.map(r=>Math.abs(r-Math.round(r))<e?Math.round(r):r))}function I(t,e){return A(t,e.concat(1)).slice(0,3)}function k(t){return t.reduce((e,n)=>e.concat(n),[])}function O(t,e,n){if(t.length!==e*n)throw new Error(`List length ${t.length} does not match ${e}x${n} matrix`);let r=a(e,n);for(let l=0;l<e;l++)for(let o=0;o<n;o++)r[l][o]=t[l*n+o];return r}function m(t,e,n,r=!1){let l=t;r||(l=w(t));let o=l[e];return l[e]=l[n],l[n]=o,l}function j(t,e){const[n,r]=c(t),[l,o]=c(e);if(n!==l)throw new Error(`Matrix M1 has ${n} rows, Matrix M2 has ${l} rows. Cannot adjoin.`);let s=a(n,r+o);for(let i=0;i<n;i++){for(let u=0;u<r;u++)s[i][u]=t[i][u];for(let u=0;u<o;u++)s[i][r+u]=e[i][u]}return s}function $(t,e,n,r,l){let o=a(n-e,l-r);for(let s=e;s<n;s++)for(let i=r;i<l;i++)o[s-e][i-r]=t[s][i];return o}function b(t){let e=w(t),[n,r]=c(e),l=0;for(let o=0;o<n;o++){if(r<=l)return e;let s=o;for(;e[s][l]===0;)if(s++,n===s&&(s=o,l++,r===l))return e;e=m(e,s,o);let i=e[o][l];e[o]=e[o].map(u=>u/i);for(let u=0;u<n;u++)u!==o&&(i=e[u][l],e[u]=v(e[u],M(i,e[o])));l++}return e}function F(t){let[e,n]=c(t);if(e!==n)throw new Error("Matrix is not square, cannot invert.");let r=j(t,g(e));return r=b(r),$(r,0,e,e,2*e)}function G(t){var e=Math.cos(t),n=Math.sin(t),r=[[e,-n,0],[n,e,0],[0,0,1]];return r}function H(t){var e=Math.cos(t),n=Math.sin(t),r=[[1,0,0],[0,e,n],[0,-n,e]];return r}function J(t){var e=Math.cos(t),n=Math.sin(t),r=[[e,0,n],[0,1,0],[-n,0,e]];return r}exports.MAdjoin=j;exports.MAsList=k;exports.MCopy=w;exports.MInverse=F;exports.MMProduct=z;exports.MRowEchelon=b;exports.MTolerate=B;exports.MTranspose=q;exports.Mpitch=J;exports.Mroll=G;exports.Mshape=c;exports.Mslice=$;exports.MswapRows=m;exports.MvProduct=A;exports.Myaw=H;exports.add=C;exports.affine3d=N;exports.applyAffine3d=I;exports.eye=g;exports.listAsM=O;exports.mZero=a;exports.subtract=E;exports.vAdd=p;exports.vClose=T;exports.vCross=D;exports.vDiv=L;exports.vDot=P;exports.vLength=d;exports.vMax=Z;exports.vMin=S;exports.vMul=x;exports.vNearlyZero=y;exports.vNormalize=R;exports.vScale=M;exports.vSub=v;exports.vZero=f;

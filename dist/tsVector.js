"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function C(t,r){return t+r}function E(t,r){return t-r}function c(t){return Array(t).fill(0)}function p(t,r){let n=c(t.length);for(let e=0;e<t.length;e++)n[e]=t[e]+r[e];return n}function S(t,r){let n=c(t.length);for(let e=0;e<t.length;e++)n[e]=Math.min(t[e],r[e]);return n}function Z(t,r){let n=c(t.length);for(let e=0;e<t.length;e++)n[e]=Math.max(t[e],r[e]);return n}function M(t,r){let n=c(r.length);for(let e=0;e<r.length;e++)n[e]=t*r[e];return n}function v(t,r){return p(t,M(-1,r))}function x(t,r){return t.reduce((n,e,o)=>n+e*r[o],0)}function d(t){return Math.sqrt(t.reduce((r,n)=>r+n*n,0))}function L(t){return M(1/d(t),t)}function y(t,r=1e-6){return d(t)<r}function P(t,r,n=1e-6){return y(v(t,r),n)}function R(t,r){const[n,e,o]=t,[l,s,i]=r;return[e*i-o*s,o*l-n*i,n*s-e*l]}function a(t,r){return Array(t).fill(0).map(()=>c(r))}function N(t,r=[0,0,0]){t===null&&(t=g(3));let n=a(4,4);for(let e=0;e<3;e++){for(let o=0;o<3;o++)n[e][o]=t[e][o];n[e][3]=r[e]}return n[3][3]=1,n}function f(t,r=!1){let n=t.length,e=t[0].length;if(r){for(let o=1;o<n;o++)if(t[o].length!==e)throw new Error(`Row ${o} has ${t[o].length} columns, expected ${e}`)}return[t.length,t[0].length]}function g(t){let r=a(t,t);for(let n=0;n<t;n++)r[n][n]=1;return r}function A(t,r){let n=c(t.length);for(let e=0;e<t.length;e++)for(let o=0;o<t[e].length;o++)n[e]+=t[e][o]*r[o];return n}function T(t,r){const[n,e]=f(t),[o,l]=f(r);if(e!==o)throw new Error(`Matrix A has ${e} columns, Matrix B has ${o} rows. Cannot multiply.`);let s=a(n,l);for(let i=0;i<n;i++)for(let u=0;u<l;u++)for(let h=0;h<e;h++)s[i][u]+=t[i][h]*r[h][u];return s}function w(t){return t.map(r=>r.slice())}function q(t,r=.001){return t.map(n=>n.map(e=>Math.abs(e-Math.round(e))<r?Math.round(e):e))}function z(t,r){return A(t,r.concat(1)).slice(0,3)}function B(t){return t.reduce((r,n)=>r.concat(n),[])}function D(t,r,n){if(t.length!==r*n)throw new Error(`List length ${t.length} does not match ${r}x${n} matrix`);let e=a(r,n);for(let o=0;o<r;o++)for(let l=0;l<n;l++)e[o][l]=t[o*n+l];return e}function m(t,r,n,e=!1){let o=t;e||(o=w(t));let l=o[r];return o[r]=o[n],o[n]=l,o}function j(t,r){const[n,e]=f(t),[o,l]=f(r);if(n!==o)throw new Error(`Matrix M1 has ${n} rows, Matrix M2 has ${o} rows. Cannot adjoin.`);let s=a(n,e+l);for(let i=0;i<n;i++){for(let u=0;u<e;u++)s[i][u]=t[i][u];for(let u=0;u<l;u++)s[i][e+u]=r[i][u]}return s}function $(t,r,n,e,o){let l=a(n-r,o-e);for(let s=r;s<n;s++)for(let i=e;i<o;i++)l[s-r][i-e]=t[s][i];return l}function b(t){let r=w(t),[n,e]=f(r),o=0;for(let l=0;l<n;l++){if(e<=o)return r;let s=l;for(;r[s][o]===0;)if(s++,n===s&&(s=l,o++,e===o))return r;r=m(r,s,l);let i=r[l][o];r[l]=r[l].map(u=>u/i);for(let u=0;u<n;u++)u!==l&&(i=r[u][o],r[u]=v(r[u],M(i,r[l])));o++}return r}function I(t){let[r,n]=f(t);if(r!==n)throw new Error("Matrix is not square, cannot invert.");let e=j(t,g(r));return e=b(e),$(e,0,r,r,2*r)}function k(t){var r=Math.cos(t),n=Math.sin(t),e=[[r,-n,0],[n,r,0],[0,0,1]];return e}function O(t){var r=Math.cos(t),n=Math.sin(t),e=[[1,0,0],[0,r,n],[0,-n,r]];return e}function F(t){var r=Math.cos(t),n=Math.sin(t),e=[[r,0,n],[0,1,0],[-n,0,r]];return e}exports.MAdjoin=j;exports.MAsList=B;exports.MCopy=w;exports.MInverse=I;exports.MMProduct=T;exports.MRowEchelon=b;exports.MTolerate=q;exports.Mpitch=F;exports.Mroll=k;exports.Mshape=f;exports.Mslice=$;exports.MswapRows=m;exports.MvProduct=A;exports.Myaw=O;exports.add=C;exports.affine3d=N;exports.applyAffine3d=z;exports.eye=g;exports.listAsM=D;exports.mZero=a;exports.subtract=E;exports.vAdd=p;exports.vClose=P;exports.vCross=R;exports.vDot=x;exports.vLength=d;exports.vMax=Z;exports.vMin=S;exports.vNearlyZero=y;exports.vNormalize=L;exports.vScale=M;exports.vSub=v;exports.vZero=c;

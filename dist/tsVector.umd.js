(function(u,M){typeof exports=="object"&&typeof module<"u"?M(exports):typeof define=="function"&&define.amd?define(["exports"],M):(u=typeof globalThis<"u"?globalThis:u||self,M(u.tsVector={}))})(this,function(u){"use strict";function M(t,e){return t+e}function S(t,e){return t-e}function s(t){return Array(t).fill(0)}function A(t,e){let r=s(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]+e[n];return r}function Z(t,e){let r=s(t.length);for(let n=0;n<t.length;n++)r[n]=Math.min(t[n],e[n]);return r}function L(t,e){let r=s(t.length);for(let n=0;n<t.length;n++)r[n]=Math.max(t[n],e[n]);return r}function v(t,e){let r=s(e.length);for(let n=0;n<e.length;n++)r[n]=t*e[n];return r}function g(t,e){return A(t,v(-1,e))}function P(t,e){let r=s(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]*e[n];return r}function R(t,e){let r=s(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]/e[n];return r}function D(t,e){return t.reduce((r,n,l)=>r+n*e[l],0)}function w(t){return Math.sqrt(t.reduce((e,r)=>e+r*r,0))}function N(t){return v(1/w(t),t)}function j(t,e=1e-6){return w(t)<e}function q(t,e,r=1e-6){return j(g(t,e),r)}function z(t,e){const[r,n,l]=t,[i,c,f]=e;return[n*f-l*c,l*i-r*f,r*c-n*i]}function a(t,e){return Array(t).fill(0).map(()=>s(e))}function B(t,e=[0,0,0]){t===null&&(t=y(3));let r=a(4,4);for(let n=0;n<3;n++){for(let l=0;l<3;l++)r[n][l]=t[n][l];r[n][3]=e[n]}return r[3][3]=1,r}function h(t,e=!1){let r=t.length,n=t[0].length;if(e){for(let l=1;l<r;l++)if(t[l].length!==n)throw new Error(`Row ${l} has ${t[l].length} columns, expected ${n}`)}return[t.length,t[0].length]}function I(t){const[e,r]=h(t);let n=a(r,e);for(let l=0;l<e;l++)for(let i=0;i<r;i++)n[i][l]=t[l][i];return n}function y(t){let e=a(t,t);for(let r=0;r<t;r++)e[r][r]=1;return e}function $(t,e){let r=s(t.length);for(let n=0;n<t.length;n++)for(let l=0;l<t[n].length;l++)r[n]+=t[n][l]*e[l];return r}function k(t,e){const[r,n]=h(t),[l,i]=h(e);if(n!==l)throw new Error(`Matrix A has ${n} columns, Matrix B has ${l} rows. Cannot multiply.`);let c=a(r,i);for(let f=0;f<r;f++)for(let o=0;o<i;o++)for(let d=0;d<n;d++)c[f][o]+=t[f][d]*e[d][o];return c}function m(t){return t.map(e=>e.slice())}function O(t,e=.001){return t.map(r=>r.map(n=>Math.abs(n-Math.round(n))<e?Math.round(n):n))}function V(t,e){return $(t,e.concat(1)).slice(0,3)}function F(t){return t.reduce((e,r)=>e.concat(r),[])}function G(t,e,r){if(t.length!==e*r)throw new Error(`List length ${t.length} does not match ${e}x${r} matrix`);let n=a(e,r);for(let l=0;l<e;l++)for(let i=0;i<r;i++)n[l][i]=t[l*r+i];return n}function b(t,e,r,n=!1){let l=t;n||(l=m(t));let i=l[e];return l[e]=l[r],l[r]=i,l}function C(t,e){const[r,n]=h(t),[l,i]=h(e);if(r!==l)throw new Error(`Matrix M1 has ${r} rows, Matrix M2 has ${l} rows. Cannot adjoin.`);let c=a(r,n+i);for(let f=0;f<r;f++){for(let o=0;o<n;o++)c[f][o]=t[f][o];for(let o=0;o<i;o++)c[f][n+o]=e[f][o]}return c}function E(t,e,r,n,l){let i=a(r-e,l-n);for(let c=e;c<r;c++)for(let f=n;f<l;f++)i[c-e][f-n]=t[c][f];return i}function T(t){let e=m(t),[r,n]=h(e),l=0;for(let i=0;i<r;i++){if(n<=l)return e;let c=i;for(;e[c][l]===0;)if(c++,r===c&&(c=i,l++,n===l))return e;e=b(e,c,i);let f=e[i][l];e[i]=e[i].map(o=>o/f);for(let o=0;o<r;o++)o!==i&&(f=e[o][l],e[o]=g(e[o],v(f,e[i])));l++}return e}function H(t){let[e,r]=h(t);if(e!==r)throw new Error("Matrix is not square, cannot invert.");let n=C(t,y(e));return n=T(n),E(n,0,e,e,2*e)}function J(t){var e=Math.cos(t),r=Math.sin(t),n=[[e,-r,0],[r,e,0],[0,0,1]];return n}function K(t){var e=Math.cos(t),r=Math.sin(t),n=[[1,0,0],[0,e,r],[0,-r,e]];return n}function Q(t){var e=Math.cos(t),r=Math.sin(t),n=[[e,0,r],[0,1,0],[-r,0,e]];return n}u.MAdjoin=C,u.MAsList=F,u.MCopy=m,u.MInverse=H,u.MMProduct=k,u.MRowEchelon=T,u.MTolerate=O,u.MTranspose=I,u.Mpitch=Q,u.Mroll=J,u.Mshape=h,u.Mslice=E,u.MswapRows=b,u.MvProduct=$,u.Myaw=K,u.add=M,u.affine3d=B,u.applyAffine3d=V,u.eye=y,u.listAsM=G,u.mZero=a,u.subtract=S,u.vAdd=A,u.vClose=q,u.vCross=z,u.vDiv=R,u.vDot=D,u.vLength=w,u.vMax=L,u.vMin=Z,u.vMul=P,u.vNearlyZero=j,u.vNormalize=N,u.vScale=v,u.vSub=g,u.vZero=s,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
